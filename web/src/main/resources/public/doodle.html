<!DOCTYPE HTML>
<html xmlns:th="http://www.springframework.org/schema/mvc">
<head>
  <meta charset="UTF-8">
  <title>No one expects the spanish inquisition</title>
  <script type="text/javascript" src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/p5.js"></script>
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.dom.js"></script>
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.sound.js"></script>
  <!--<script type="text/javascript" src="js/didleDoodle.js"/>-->
</head>
<body onload="setup()">
<a>No one expects the spanish inquisition</a>
</body>
<script>
  var socket;

function setup() {
    createCanvas(400, 400);
    background(0);
    socket = io.connect('http://192.168.0.105:3000');
    socket.on('mouse', draw);
}

function draw(data) {
    console.log("Got: " + data.x + " " + data.y);
    fill(0, 0, 255);
    noStroke();
    ellipse(data.x, data.y, 20, 20);
}

function mouseDragged() {
    fill(255);
    noStroke();
    ellipse(mouseX, mouseY, 20, 20);
    sendmouse(mouseX, mouseY);
}

function sendmouse(xpos, ypos) {
    var data = {
        x: xpos,
        y: ypos
    };
    socket.emit('mouse', data);
}
</script>
</html>
